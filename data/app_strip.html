<div class="span6"> <link rel="stylesheet" href="farbtastic.css" type="text/css"/> <script type="text/javascript" src="farbtastic.js"></script><section class="panel"><header class="panel-heading"><i class="fa fa-lightbulb-o text-default"></i> RGB LED Strip</header> <div class="pull-in text-center"><div id="colorpicker"></div><a href="#" id="stripOFF" class="btn btn-circle"><i class="fa fa-power-off"></i></a><a href="#" id="stripRainbow" class="btn btn-circle"><i class="fa fa-random"></i></a> </div></section><script type="text/javascript">var oldcolor; var sendAnother=true; function nullCallback(color){}function callback(color){if (oldcolor !=color){if (sendAnother==true){sendAnother=false; $.ajax({url:"strip/hue?color="+(color.replace("#","")),success:function(data){sendAnother=true; oldcolor=color;}});}}}$(document).ready(function(){$f=$.farbtastic('#colorpicker');$f.setColor("#%%COLOR%%");$f.linkTo(callback); $("#stripOFF").click(function(event){event.preventDefault(); sendAnother=false; $.ajax({url:"strip/hue?color=000000",success:function(data){sendAnother=true;}});}); $("#stripRainbow").click(function(event){sendAnother=false; event.preventDefault();$.ajax({url:"strip/rainbow/on",success:function(data){sendAnother=true;}});});setInterval(function(){if (sendAnother==true){sendAnother=false;$.ajax({url:"strip/getcolor", success : function(data){sendAnother=true; $f.linkTo(nullCallback); $f.setColor("#"+data.color); $f.linkTo(callback);}});}}, 1000);});</script><style>.farbtastic{margin: 0 auto}</style></div><!-- %%APP_ZONE%% -->